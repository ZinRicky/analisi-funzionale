\chapter{Spazi funzionali}
\section{Riflessività, separabilità e dualità in $L^p$}
Sia $(\Omega, \M, \mu)$ uno spazio di misura. Ricordiamo che, per $p \in [1,\infty)$, definiamo
\begin{eqalign*}
	\|f\|_p &:= \left( \int |f|^p\,d\mu \right)^{1/p}\!\!, \qquad f:\Omega \to \R,\\
	L^p(\Omega) &:= \{ f : \Omega \to \R \suchthat \|f\|_p < \infty \}
\end{eqalign*}
Mentre
\begin{eqalign*}
	\|f\|_\infty &:= \esssup_{x \in \Omega} |f(x)| = \inf \{C \in \R \suchthat \mu(|f| \leq C) = 1 \}, \qquad f:\Omega \to \R,\\
	L^\infty(\Omega) &:= \{ f : \Omega \to \R \suchthat \|f\|_\infty < \infty \}
\end{eqalign*}

Le norme definite sopra sono soltanto seminorme (cioè $\|f\| = 0 \nimplies f \equiv 0$) se non quozientiamo gli spazi $L^p(\Omega)$ per la relazione di uguaglianza quasi ovunque. Una volta fatto questo, otteniamo spazi di Banach.

Nel seguente, assumeremo che $(\Omega, \M, \mu)$ sia $\sigma$-finito, ossia che $\Omega$ sia l'unione numerabile di sottoinsiemi di misura finita.

\begin{theorem}[Disuguaglianza di Clarkson]
	Se $2 \leq p < \infty$, ed $f,g \in \L^p(\Omega)$, si ha:
	\begin{equation*}
		\left\|\frac{f+g}2 \right\|_p^p + \left\|\frac{f - g}2 \right\|_p^p \leq \frac{\|f\|_p^p + \|g\|_p^p}2,
	\end{equation*}
	mentre se $1 < p \leq 2$:>
	\begin{equation*}
		\left\|\frac{f+g}2 \right\|_p^{p'} + \left\|\frac{f - g}2 \right\|_p^{p'} \leq \left( \frac{\|f\|_p^p + \|g\|_p^p}2 \right)^{1/p-1}
	\end{equation*}
	dove $p' = p/(p-1)$ è il \defining{coinugato di Young} di $p$.
\end{theorem}
Dimostreremo solo la prima, essendo la seconda parecchio più sofisticata.
\begin{proof}[Dimostrazione della prima]
	Riconduciamo la disuguaglianza in oggetto all'analoga disuguaglianza numerica:
	\begin{equation*}
		\left\|\frac{a+b}2 \right\|_p^p + \left\|\frac{a - b}2 \right\|_p^p \leq \frac{\|a\|_p^p + \|b\|_p^p}2, \qquad \text{per ogni $a,b \in \R$}.
	\end{equation*}
	Questa si prova dalla disuguaglianza di Jensen per i reali\footnote{Si ottiene come caso particolare della disuguaglianza di Jensen per gli spazi $\ell^p$, applicandola a successione di soli due elementi (cioè con $a_n = 0$ per $n>2$).}
	\begin{equation*}
		(A^p + B^p)^{1/p} \leq (A^2+B^2)^{p/2}, \qquad \text{per ogni $A,B \geq 0$}.
	\end{equation*}
	Si pone allora:
	\begin{equation*}
		A = \frac{a+b}2, \qquad B = \frac{a-b}2
	\end{equation*}
	e si ottiene
	\begin{equation*}
		\left| \frac{a+b}2 \right|^p + \left|\frac{a-b}2\right|^p \leq \left( \left| \frac{a+b}2 \right|^2 + \left|\frac{a-b}2\right|^2 \right)^{p/2}
	\end{equation*}
	Svolgendo i quadrati al secondo membro:
	\begin{equation*}
		\left| \frac{a+b}2 \right|^p + \left|\frac{a-b}2\right|^p \leq \left( \frac{a^2+b^2}2 \right)^{p/2}
	\end{equation*}
	Nel caso $p \geq 2$, la funzione $x \mapsto x^{p/2}$ è convessa, dunque
	\begin{equation*}
		\left| \frac{a+b}2 \right|^p + \left|\frac{a-b}2\right|^p \leq\frac{|a|^p + |b|^p}2.
	\end{equation*}
	Applicando questa puntualmente ad $f$ e $g$, ed integrando, si ottiene la disuguaglianza cercata.
\end{proof}

\begin{theorem}
	Se $1 < p < \infty$, allora $L^p(\Omega)$ è uniformemente convesso e quindi riflessivo.
\end{theorem}
\begin{proof}
	Siano $f,g \in L^p(\Omega)$ e supponiamo $\|f\|_p, \|g\|_p \leq 1$, $\|f-g\|_p < \varepsilon$ per $\varepsilon>0$ fissato. Sia $p \geq 2$: dalla prima disuguaglianza di Clarkson:
	\begin{eqalign*}
		\left\| \frac{f+g}2 \right\|^p + \left\| \frac{f-g}2 \right\|_p^p &\leq \frac{\|f\|^p_p+\|g\|^p_p}2\\
		\left\| \frac{f+g}2 \right\| &\leq \left(\frac{\|f\|^p_p+\|g\|^p_p}2 - \left\| \frac{f-g}2\right\|_p^p \right)^{1/p}\\
		&\leq \left( 1 - \left(\frac{\varepsilon}{2}\right)^p \right)^{1/p}
	\end{eqalign*}
	Ma questo sicuramente si può stimare con $1-\delta$ scegliendo opportunamente $\delta > 0$. Per $1 < p \leq 2$ si usa la seconda disuguaglianza in maniera analoga.
\end{proof}

\begin{theorem}[di rappresentazione di Riesz]
\label{th:riesz_repr}
	Sia $1 \leq p < \infty$, sia $\varphi \in L^p(\Omega)'$.
	Allora esiste $u \in L^{p'}(\Omega)$ tale che
	\begin{equation*}
		\langle \varphi, f \rangle = \int_\Omega uf\,d\mu, \qquad \text{per ogni $f \in L^p(\Omega)$}.
	\end{equation*}
	Inoltre, $\|\varphi\|_{(L^p)'} = \|u\|_{p'}$.
\end{theorem}
\begin{proof}
	La dimostrazione si distingue in due casi.

	\textbf{Caso $p \neq 1$}. Consideriamo $T:L^{p'} \to (L^p)'$ che agisce su $u \in L^{p'}$ come
	\begin{equation*}
		Tu = f \mapsto \int_\Omega uf \,d\mu.
	\end{equation*}
	Vale
	\begin{equation*}
		|\langle Tu, f \rangle| = \left| \int_\Omega uf\,d\mu \right| \underset{\text{H\"o}}\leq \|u\|_{p'} \|f\|_p
	\end{equation*}
	quindi $Tu$ è lineare continuo, e si ha $\|Tu\| \leq \|u\|$. Fissato ora $u \in L^{p'}$, definiamo $f := |u|^{p'-2} \, u$. Si ha
	\begin{equation*}
		\|f\|_p = \left( \int_\Omega |u|^{p^2/(p-1) - 2p + p} \right)^{1/p} = \|u\|_{p'}^{1/(p-1)} < \infty.
	\end{equation*}
	Perciò
	\begin{equation*}
		\frac{|\langle Tu, f\rangle|}{\|f\|_{L^p}} = \frac{\int_\Omega |u|^{p'-2}|u|^2\,d\mu}{\|u\|_{p'}^{1/(p-1)}} = \|u\|_{p'}.
	\end{equation*}
	Segue che il bound ottenuto sopra è sharp, e quindi che $Tu$ è un isometria per ogni $u \in L^{p'}$.

	Per completezza di $L^{p'}$ allora, $T(L^{p'})$ è chiuso in $(L^p)'$. Per provare che $T$ è suriettivo basta allora provarne la densità. Per fare ciò, prendiamo $F \in (L^p)''$ e supponiamo $F\vert_{T(L^{p'})} \equiv 0$. Dalla riflessività di $L^p$ sappiamo che $F= \xi_h$ per un certo $h \in L^p$. Ma allora
	\begin{equation*}
		0 = \langle F, T(u) \rangle = \langle T(u), h \rangle, \qquad \text{per ogni $u \in L^{p'}$}.
	\end{equation*}
	Definiamo $u = |h|^{p-2} h$. Si ha
	\begin{equation*}
		0 = \langle Tu, h \rangle = \int_\Omega uh\,d\mu = \int_\Omega |h|^p\,d\mu
	\end{equation*}
	Segue che $h=0$, e dunque $F \equiv 0$, dimostrando la densità dell'immagine di $T$ in $(L^p)'$.

	\textbf{Caso $p=1$}. Osserviamo che data $\varphi \in (L^1)'$, essa induce un funzionale su $L^2$. Ricordiamo che abbiamo assunto $\Omega$ essere $\sigma$-finito, quindi in particolare possiamo scrivere $\Omega = \bigcup_{n \in \N} \Omega_n$ dove, senza perdita di generalità, si ha $\Omega_n \subseteq \Omega_{n+1}$ e $\mu(\Omega) < \infty$.
	Sia inoltre $\theta \in L^2$, $\theta > 0$ e pari ad una costante $\varepsilon_n$ su ciascuno degli $\Omega_{n+1} \setminus \Omega_n$ [per esempio: $\varepsilon_n = \sqrt{1/(n^2 \mu(\Omega_{n+1}\setminus \Omega_n))}$].

	Definiamo ora $\psi : L^2 \to \R$ come $\psi(f) = \langle \varphi, f \theta \rangle$. Per la disuguaglianza di H\"older, $f\theta \in L^1$. Inoltre $\psi$ è lineare (ovvio) e continua:
	\begin{equation}
	\label{eq:riesz_norm}
		|\langle \psi, f \rangle|=|\langle \varphi, f\theta\rangle| \leq \|\varphi\|_{(L^1)'} \|f\theta\|_1 \leq \|\varphi\|_{(L^1)'}\|\theta\|_2\|f\|_2.
	\end{equation}
	Dunque $\psi \in (L^2)'$, e per il caso $p=2$ (già dimostrato) del teorema di Riesz, esiste unica $v \in L^2$ tale che
	\begin{equation*}
		\psi(f) = \langle \varphi, f\theta \rangle = \int_\Omega fv \,d\mu, \qquad \text{per ogni $f \in L^2$}.
	\end{equation*}
	Volendo calcolare $\langle \varphi, g \rangle$ ($g \in L^1$) potremmo procedere così:
	\begin{equation}
	\label{eq:riesz_star}
		\langle \varphi, g \rangle = \langle \varphi, \frac{g}\theta\, \theta \rangle
		= \int_\Omega \frac{g}\theta\, v \,d\mu
		= \int_\Omega g \left( \frac{v}\theta \right)\,d\mu
		= \int_\Omega gu\,d\mu, \quad \text{dove $u = v/\theta$}.
	\end{equation}
	Ciò vale se $g/\theta \in L^2$. Proviamo ora che
	\begin{enumerate}
		\item $u \in L^\infty$, $\|u\|_\infty \leq \|\varphi\|$ (in realtà $\|u\|_\infty = \|\varphi\|$). %, ma siccome $v$ rappresenta $\varphi$ e dalla~\eqref{eq:riesz_norm}, si ha $\|u\theta\|_2 = \|v\|_2 = \|\psi\|_{(L^2)'} \leq \|\varphi\|_{(L^1)^1}\|\theta\|_2$ e dunque $\|u\|_2 \leq \|\varphi\|$)
		Osserviamo che~\eqref{eq:riesz_star} vale ancora se al posto di $g$ uso $g' \ind_{\Omega_n}$ per $g' \in L^\infty$ perchè in quel caso $g' \ind_{\Omega_n} \in L^p$ per ogni $p$ e $\theta$ è limitata dal basso da una costante, quindi $g' \ind_{\Omega_n}/\theta \in L^2$. Dunque~\eqref{eq:riesz_star} si riscrive come
		\begin{equation}
		\label{eq:riesz_starstar}
			\langle \varphi, g \ind_{\Omega_n} \rangle = \int_\Omega g \ind_{\Omega_n} u\,d\mu, \qquad \text{per ogni $g \in L^\infty$}.
		\end{equation}
		Fissiamo ora $C > \|\varphi\|$ e sia $A = \{\|u\| > C\}$. Proviamo che $\mu(A) = 0$. Posto $g := \ind_A \sgn u$, dalla~\eqref{eq:riesz_starstar} segue
		\begin{equation*}
			\langle \varphi, \ind_A \ind_{\Omega_n} \sgn u \rangle = \int_{A \cap \Omega_n} |u|\,d\mu \geq C \mu(A \cap \Omega_n).
		\end{equation*}
		D'altra parte,
		\begin{equation*}
			\langle \varphi, \ind_A \ind_{\Omega_n} \sgn u \rangle \leq \|\varphi\| \|\ind_A \ind_{\Omega_n} \sgn u\|_1 = \|\varphi\| \mu(A \cap \Omega_n)
		\end{equation*}
		Per cui si ha
		\begin{equation*}
			C \mu(A \cap \Omega_n) \leq \langle \varphi, \ind_A \ind_{\Omega_n} \sgn u \rangle \leq \|\varphi\| \mu(A \cap \Omega_n).
		\end{equation*}
		Dunque o $\mu(A \cap \Omega_n) = 0$, oppure
		\begin{equation*}
			C \leq \langle \varphi, \ind_A \ind_{\Omega_n} \sgn u \rangle \leq \|\varphi\|,
		\end{equation*}
		contraddicendo l'ipotesi che $C > \|\varphi\|$. Siccome $\mu(A \cap \Omega_n) = 0$ per ogni $n \in \N$, $\|u\| < C$ quasi certamente, da cui concludiamo che $\|u\|_\infty \leq \|\varphi\|$, come dovevasi dimostrare.

		\item $\langle \varphi, g \rangle = \int_\Omega gu\,d\mu$ per ogni $g \in L^1$. Dimostriamo questo con un procedimento di troncatura: definiamo, per ogni $n \in \N$:
		\begin{equation*}
			g_n(x) = \begin{cases}
				g(x) & |g(x)| \leq n\\
				n \frac{g(x)}{|g(x)|} & \text{altrimenti}
			\end{cases}
		\end{equation*}
		Chiaramente: $g_n \conv g$, e $g_n \leq g$, dunque $g_n \convin{L^1} g$. Inoltre $g_n \in \L^\infty$, quindi possiamo usare la~\eqref{eq:riesz_starstar} per dire
		\begin{equation*}
			\langle \varphi, g_n \ind_{\Omega_n} \rangle = \int_\Omega g_n \ind_{\Omega_n} u \,d\mu,
		\end{equation*}
		Si ha comunque $g_n \ind_n \convin{L^1} g$, perchè gli $\Omega_n$ invadono $\Omega$. Da ciò deduciamo che $\langle \varphi, g_n \ind_{\Omega_n} \rangle \conv \langle \varphi, g \rangle$ per continuità, e $\int_\Omega  g_n \ind_{\Omega_n} u \,d\mu \conv \int_\Omega g u \,d\mu$ siccome $u \in L^\infty$. Ma questo è il teorema di Riesz cercato:
		\begin{equation*}
			\langle \varphi, g \rangle = \int_\Omega gu\,d\mu.
		\end{equation*}
	\end{enumerate}
	Da ciò segue che $\|\varphi\| \leq \|u\|$, e quindi che $\|\varphi\|=\|u\|$.
\end{proof}

\begin{remark}
	L'intuizione fondamentale nel caso $p=1$ è il passaggio~\eqref{eq:riesz_star}. Dopodichè devo solo ampliare l'integrabilità di $g/\theta$.
\end{remark}

\begin{theorem}
	A meno che $(\Omega, \M, \mu)$ non sia costituito da un numero finito di atomi, $L^1(\Omega)$ (e quindi $L^\infty(\Omega)$) non sono riflessivi.
\end{theorem}
\begin{proof}
	Ci sono due casi:
	\begin{enumerate}
		\item Esiste una successione decrescente di misurabili $\{\Omega_n\}_{n \in \N}$ tali che $\mu(\Omega_n) \neq 0$ ma $\lim_n \mu(\Omega_n) = 0$.

		\item Altrimenti una tale successione non esiste, cioè ogni successione decrescente di misurabili non negligibili ha limite non negligibile. Pertanto $\Omega$ è formato da una quantità numerabile di atomi, ossia insiemi con misura non nulla ma i cui sottoinsiemi misurabili hanno misura nulla o pari a quella dell'insieme stesso.
	\end{enumerate}

	Nel primo caso, si considera la successione:
	\begin{equation*}
		u_n = \frac1{\mu(\Omega_n)} \ind_{\Omega_n}, \qquad n \in \N.
	\end{equation*}
	Se $L^1$ fosse riflessivo, questa successione (che è limitata) converge debolmente ad $u \in L^1$ (a meno di passare ad una sottosuccessione). Ciò implica che
	\begin{equation*}
		\int_\Omega u_n \varphi \,d\mu \conv \int_\Omega u \varphi\,d\mu, \qquad \text{per ogni $\varphi \in L^\infty$}.
	\end{equation*}
	Allora fissato $j \in \N$, si ha in particolare:
	\begin{equation*}
		\int_\Omega u_n \ind_{\Omega_j} \,d\mu \conv[n] \int_\Omega u \ind_{\Omega_j}\,d\mu.
	\end{equation*}
	Siccome gli $\Omega_n$ sono decrescenti, per $n \geq j$ si ha $\Omega_j \supseteq \Omega_n$, dunque $u_n \ind_{\Omega_j} = \frac1{\mu(\Omega_n)} \ind_{\Omega_n}$, che integrato su tutto $\Omega$ fa $1$. Dunque
	\begin{equation*}
		\int_\Omega u \ind_{\Omega_j} \,d\mu = 1.
	\end{equation*}
	Ma siccome questo vale per ogni $j \in \N$, e $\ind_{\Omega_j} \conv[j] 0$, contraddizione.

	Nel secondo caso, possiamo, senza perdita di generalità, assumere che $\Omega$ sia l'unione disgiunta di una quantità numerabile di punti $\{a_n\}_{n \in \N}$. In tal caso, $L^1 = \ell^1$, e proviamo che $\ell^1$ non è riflessivo. Infatti se così fosse, la successione degli elementi naturali $\{e_n\}_{n \in \N}$ avrebbe una sottosuccessione debolmente convergente ad $u \in \ell^1$. Siccome $\vec 1 =(1,1, \ldots) \in \ell^\infty$, si ha che $e_n \cdot \vec 1 \conv u \cdot \vec 1$, ma ciò significa che
	\begin{equation*}
		1 \conv u \cdot \vec 1
	\end{equation*}
	È pacifico però che $\e_n \weakconv u$ implica la convergenza puntuale che implica $u= \vec 0$. D'altro canto $0 \cdot \vec 1 = 0 \neq 1$.

	Rimane solo il caso in cui il numero di atomi è finito, nel quale è banale che $L^1$ è riflessivo (perchè finito-dimensionale).
\end{proof}

Consideriamo ora il caso $(\Omega, \M, \mu) = (\R^n, \L, m)$.

\begin{lemma}
\label{lemma:lemmino}
	Sia $(X,d)$ metrico ove esiste un aperto partizionato da una famiglia più che numerabile di aperti.
	Allora $(X,d)$ non è separabile.
\end{lemma}
\begin{proof}
	Supponiamo per assurdo che $(X,d)$ sia separabile, cioè che esista $X'=\{x_n\}_{n \in \N}$ denso in $X$. Sia $\{A_i\}_{i \in I}$ la partizione in ipotesi. Per densità di $X'$, per ogni $i \in I$ esiste un $n_i \in \N$ tale che $x_{n_i} \in A_i$. D'altro canto ciò non è possibile, siccome $\card{I} > \card\N$ e tutti gli $A_i$ sono disgiunti e non vuoti.
\end{proof}

\begin{theorem}
	Sia $\Omega$ un aperto di $\R^n$. Se $1 \leq p < \infty$, allora $L^p(\Omega)$ è separabile. Se $p=\infty$ allora $L^\infty(\Omega)$ non è separabile.
\end{theorem}

\begin{remark}
	Si può leggere questo teorema come il fatto che le funzioni regolari, ad esempio lisce, non sono dense in $L^\infty(\Omega)$. Questo perchè la convergenza uniforme conserva la regolarità, mentre in $L^\infty$ molti elementi non sono affatto regolari.
	Questo ha come conseguenza che l'approssimazione regolare di una funzione $L^\infty$ è una questione delicata, ad esempio la mollificazione non converge in norme (ma solo debolmente$^*$).
\end{remark}

\begin{proof}
	Nel caso $1 \leq p < \infty$, basta dimostrare che $L^p(\R^n)$ è separabile, essendo che $L^p(\Omega) \leq L^p(\R^n)$ (immergo estendendo le funzioni di $\Omega$ con zero). Usando il fatto che $\Czero_c(\R^n)$ è denso in $L^p(\R^n)$, è possibile vedere che tutte le combinazioni lineari a coefficienti razionali di funzioni caratteristiche del tipo
	\begin{equation*}
		\ind_{\prod_{i=1}^N (a_i,b_i)}, \quad a_i \leq b_i \in \Q,
	\end{equation*}
	sono dense in $L^p$.

	Nel caso $p=\infty$, consideriamo la famiglia $\{W_i\}_{i \in I}$ di tutte le palle aperte contenute in $\Omega$. Per ogni $i \neq j$, si ha $W_i \Delta W_j \neq \varnothing$, da cui $\|\ind_{W_i} - \ind_{W_j}\|_\infty \geq 1$. Consideriamo allora la famiglia
	\begin{equation*}
		\{ B_{L^\infty(\Omega)}(\ind_{W_i}, 1/2) \suchthat i \in I\}.
	\end{equation*}
	Affermiamo che tale famiglia è fatta da aperti disgiunti e non vuoti. Banalmente le palle in oggetto sono aperte e non vuote. Per verificare la disgiunzione, supponiamo per assurdo che, per certi $i \neq j$, esista $f \in B_{L^\infty(\Omega)}(\ind_{W_i}, 1/2) \cap B_{L^\infty(\Omega)}(\ind_{W_j}, 1/2)$. Allora
	\begin{equation*}
			\| \ind_{W_i} - \ind_{W_j} \| \leq \|\ind_{W_i} - f\|_\infty + \|f-\ind_{W_j}\|_\infty < \frac12 + \frac12 = 1,
	\end{equation*}
	assurdo. Perciò Lemma~\ref{lemma:lemmino} segue la tesi.
\end{proof}

\begin{remark}
	In generale, $L^\infty$ non è separabile a meno che non sia riflessivo \cite[103]{brezis2010functional}.
\end{remark}

\section{Compattezza}
\begin{definition}
	Sia $(X,d)$ uno spazio metrico, un insieme $A \subseteq X$ si dice \defining{totalmente limitato} se per ogni $\varepsilon > 0$ esistono $n_\varepsilon \in \N$ ed $n_\varepsilon$ palle $B_1, \ldots, B_{n_\varepsilon}$ di raggio $\varepsilon$ che ricoprono $A$.
\end{definition}

\begin{remark}
	Ogni insieme totalmente limitato è limitato, ma il viceversa non vale, ad esempio in uno spazio normato di dimensione infinita.
\end{remark}

\begin{lemma}
	Sia $(X,d)$ metrico.
	Allora $X$ è totalmente limitato se e solo se da ogni successione si può estrarre una sottosuccessione di Cauchy.
\end{lemma}
\begin{proof}
	Facile. Se la successione ha immagine finita, ok. Altrimenti scelgo $\varepsilon =1/n$, trovo un numero finito di palle. Una di queste contiene una coda della successione. Procedo così ed estraggo la sottosuccessione cercata.

	Viceversa, negando l'ipotesi otteniamo una rete di $\varepsilon$-palle infinita i cui centri non ammettono una sottosuccessione di Cauchy.
\end{proof}

\begin{theorem}[Heine--Borel per spazi metrici]
\label{th:heine_borel}
	Sia $(X,d$) metrico. Allora le seguenti sono equivalenti:
	\begin{enumerate}
		\item $(X,d)$ è compatto.
		\item Da ogni successione si può estrarre una sottosuccessione convergente.
		\item $(X,d)$ è completo e totalmente limitato.
	\end{enumerate}
\end{theorem}

\begin{remark}
	$A \subseteq \R^n$ è limitato se e soltanto se è totalmente limitato
\end{remark}

\begin{definition}
	Sia $(X,d)$ metrico, $A \subseteq X$ si dice precompatto se $A$ è relativamente compatto, cioè $\closure A$ è compatto.
\end{definition}

\begin{corollary}
	Sia $(X,d)$ uno spazio metrico completo, $A \subseteq X$ è precompatto se e solo se è totalmente limitato.
\end{corollary}
\begin{proof}
	\leavevmode
	\begin{description}
		\item[$(\Longrightarrow)$] Segue da Heine--Borel.
		\item[$(\implied)$] Se $A$ è totalmente limitato, lo è pure $\closure A$. Dunque anche questa implicazione segue da Heine--Borel.
	\end{description}
\end{proof}

Indichiamo con $\Czero_b$ il fascio delle funzioni continue limitate su $(X,d)$. Si osservi che se $X$ è compatto, $\Czero_b = \Czero$.

\begin{definition}
	Sia $(X,d)$ metrico, $E \subseteq X$.
	Sia $\mathcal F$ una famiglia di funzioni definite su $E$ a valori in $\R$.
	\begin{enumerate}
		\item $\mathcal F$ si dice \defining{puntualmente limitato} se per ogni $x \in E$, l'insieme $\mathcal F(x)$ è limitato.
		\item $\mathcal F$ si dice \defining{equilimitata} se $\mathcal F(E)$ è limitato.
		\item $\mathcal F$ si dice \defining{equicontinua} se le $\mathcal F$ sono continue, e il modulo di continuità è uniforme rispetto ai punti e alle funzioni:
		\begin{equation*}
			\forall \varepsilon > 0\ \exists \delta > 0\ \forall x,y \in E\ \forall f \in \mathcal F,\ (d(x,y) < \delta \implies |f(x) - f(y)| < \varepsilon).
		\end{equation*}
	\end{enumerate}
\end{definition}

\begin{lemma}
\label{lemma:funsp_three}
	Se $E$ è numerabile e $\mathcal F = \{f_n\}_{n \in \N}$ puntualmente limitata su $E$, allora esiste una sottosuccessione di $\mathcal F$ puntualmente convergente.
\end{lemma}
\begin{proof}
	Si procede per diagonalizzazione sulle successioni $\{f_n(x_k)\}_{n,k \in \N}$. Si estraggono successivamente successioni convergenti puntualmente, ottenendo la sottosuccessione $f_{1,1}, f_{2,2}, \ldots$ che converge puntualmente.
\end{proof}

\begin{theorem}[Ascoli--Arzelà]
	Sia $(X,d)$ spazio metrico compatto, sia $\mathcal F =\{f_n\}_{n \in \N}$ una famiglia di funzioni puntualmente limitata ed equicontinua.
	Allora
	\begin{enumerate}
		\item $\mathcal F$ è equilimitata.
		\item $\mathcal F$ ammette una sottosuccessione uniformemente convergente.
	\end{enumerate}
\end{theorem}
\begin{proof}
	Si noti che $(X, d)$ compatto implica $(X,d)$ separabile. Infatti si consideri la successione di ricoprimenti data dalle palle di raggio $q_n$, dove $\{q_n\}_{n \in \N}$ è un'enumerazione dei razionali. Ciascuno di questi ricoprimenti ammette un raffinamento finito. I centri di tutti questi raffinamenti formano un insieme denso e numerabile.

	Sia $\delta$ il modulo di equicontinuità di $\mathcal F$. Per compattezza, $X$ è totalmente limitato, dunque posso trovare, per ogni $\varepsilon > 0$, un ricoprimento finito (di cardinalità $n_\delta \in \N$) di $X$ costituito da $\delta_\varepsilon$-palle i cui centri posso assumere cadere in $E$ denso numerabile.

	\begin{enumerate}
		\item Per ogni $x \in X$ esiste $1 \leq i \leq n_\delta$ tale che $x \in B(x_i, \delta)$. Allora
		\begin{equation*}
			|f_n(x)| \leq |f_n(x) - f_n(x_1)| + |f_n(x_1)| \leq \varepsilon + \sup_{1 \leq i \leq n_\delta} |f_n(x_i)| \leq M.
		\end{equation*}

		\item Dal Lemma~\ref{lemma:funsp_three}, a meno di passare ad una sottosuccessione, $\{f_n\}_{n \in \N}$ converge puntualmente in $E$. D'altro canto, per qualsiasi $x \in X$ esiste $1 \leq i \leq n_\delta$ tale che $x \in B(x_i, \delta)$. Si mostra che $\{f_n\}_{n \in \N}$ è Cauchy: infatti
		\begin{eqalign*}
			|f_n(x) - f_m(x)| &\leq |f_n(x)-f_n(x_i)|+ |f_n(x_i) - f_m(x_i)| + |f_m(x_i) - f_m(x)|\\
			&\leq \varepsilon + |f_n(x_i) - f_m(x_i)| + \varepsilon
		\end{eqalign*}
		e il termine centrale è inferiore a $\varepsilon$ per $n,m \in \N$ sufficientemente grandi.
		Per completezza di $\Czero(X)$, concludiamo che $f_n \conv f \in X$ uniformemente.
	\end{enumerate}
\end{proof}

Questa forma che abbiamo appena visto sarebbe da chiamare più propriamente `teorema di Ascoli'. Il contributo di Arzelà è il seguente corollario:

\begin{corollary}[Caratterizzazione dei compatti di $\Czero$]
	Sia $(X,d)$ spazio metrico compatto e sia $A \subseteq \Czero(X)$.
	Allora $A$ è totalmente limitato in $(\Czero(X), \|\cdot\|_\infty)$ se e solo se $A$ è equilimitata ed equicontinua.
\end{corollary}
\begin{proof}
	\leavevmode
	\begin{description}
		\item[$(\Longrightarrow)$] Dalla totale limitatezza, otteniamo che $A$ è limitato in $\Czero$, quindi $A$ è equilimitata come famiglia funzionale.
		D'altra parte, per ogni $\varepsilon > 0$ esistono $f_1, \ldots, f_{n_\varepsilon} \in A$ tali che le palle $B(f_i, \varepsilon)$ ricoprono $A$. In particolare, comunque preso $f \in A$ esiste un $1 \leq i \leq n_\varepsilon$ tale che $\|f-f_i\|_\infty < \varepsilon$. Siano ora $x,y \in X$:
		\begin{eqalign*}
			|f(x) - f(y)| &\leq |f(x) - f_i(y)| + |f_i(x) - f_i(y)| + |f_i(y) - f(x)|\\
			&\leq \varepsilon + |f_i(x) - f_i(y)| + \varepsilon
		\end{eqalign*}
		e $|f_i(x) - f_i(y)| < \varepsilon$ per uniforme continuità di $f_i$ (quindi a patto di prendere $\delta$ sufficientemente piccolo). Siccome le $f_i$ sono in numero finito, tale $\delta$ è effettivamente indipendente da $x$, e dunque abbiamo ottenuto l'equicontinuità di $A$.
		\item[$(\implied)$] Dal teorema di Ascoli--Arzelà, data una successione in $A$ questa ammette un'estratta convergente. Pertanto $A$ soddisfa una delle condizioni di compattezza negli spazi metrici (Teorema~\ref{th:heine_borel})
	\end{description}
\end{proof}

\begin{theorem}
	Sia $p \in [1,\infty)$, sia $\{f_n\}_{n \in \N}$ una successione in $L^p(\R^n)$ tale che
	\begin{description}
		\item[Equilimitatezza.] Esiste $M>0$ che limita uniformemente le norme:
		\begin{equation*}
			\|f_n\|_{p} \leq M, \qquad \text{per ogni $n \in \N$}.
		\end{equation*}
		\item[Equicontinuità delle traslate.] Per ogni $\varepsilon > 0$, esiste $\delta > 0$ tale che
		\begin{equation*}
			\int_{\R^n} |f_n(x+h) - f_n(x)|^p \,dx < \varepsilon, \qquad \text{per ogni $\|h\| < \delta$, $n \in \N$}.
		\end{equation*}
		\item[Equi-$p$-concentrazione.] Per ogni $\varepsilon > 0$, esiste $R > 0$ tale che
		\begin{equation*}
			\int_{\R^n \setminus B(0,R)} |f_n(x)|^p\,dx < \varepsilon, \qquad \text{per ogni $n \in \N$}.
		\end{equation*}
	\end{description}
\end{theorem}
\begin{proof}
	Omissis. Vedere \cite{brezis2010functional}.
\end{proof}

\begin{corollary}[Caratterizzazione dei compatti di $L^p(\R^n)$]
	Sia $p \in [1,\infty)$, $A \subseteq L^p(\R^n)$.
	Allora $A$ è totalmente limitato se e solo se
	\begin{enumerate}
		\item $A$ è limitato.
		\item $A$ è equicontinuo rispetto alle traslate.
		\item $A$ è equi-$p$-concentrato.
	\end{enumerate}
\end{corollary}
